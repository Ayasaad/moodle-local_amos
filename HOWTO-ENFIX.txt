HOWTO Prepare branches with en_fix strings for integration
==========================================================

1. Create (clone) an issue in the tracker to cover this task.

    <https://tracker.moodle.org/issues/?jql=summary ~ "Import fixed English strings (en_fix) into the main English pack" ORDER BY key DESC>

2. At AMOS server, run enfix-export.php and download data generated by it.

    # ssh lang.moodle.org
    # cliexec.sh /html/local/amos/cli/enfix-export.php
    # exit

   (now back at your notebook)

    # cd ~/tmp
    # rsync -avzP root@lang.moodle.org:/root/lang.moodle.org/moodledata/amos/export-enfix ~/tmp/

3. Go to your moodle.git checkout and make a branch to be submitted for integration.

    # cd /path/to/moodle/git/clone
    # git checkout -b en_fix origin/master

4. Make a temporary directory that will hold symlinks to all language files.

    # make enfix-symlinks

    Note: this applies to David's Makefile. It effectively executes:

    # mkdir tmp
    # /path/to/amos/site/local/amos/cli/enfix-symlinks.sh $(pwd) tmp
    # ls -al tmp

5. Run the enfix-merge.php.

    # make enfix-merge VER="2.7"

    Note: again, this just executes:

    # php /path/to/amos/site/local/amos/cli/enfix-merge.php --symlinksdir=$(pwd)/tmp --enfixdir=/home/mudrd8mz/tmp/export-enfix/2.7 > enfix.log

6. Review the changes.

    # git diff

   Pay attention to eventual [ERR] and [WRN] messages in enfix.log - some
   strings (especially those double-quoted etc) are not detected well.

    # less enfix.log

   Check for syntax errors.

    # cd tmp
    # for f in *.php; do php -l $f; done
    # cd ..

7. Commit the modified files.

    # git commit -a --author="Helen Foster <helen@moodle.org>" -e -m "MDL-xxxxx Merge English strings from the en_fix language pack"

8. Repeat steps 3-7 for supported STABLE branches as well.
