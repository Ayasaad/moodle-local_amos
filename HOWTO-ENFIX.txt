HOWTO Prepare branches with en_fix strings for integration
==========================================================

1. At AMOS server, run enfix-export.php and download data generated by it.

    # ssh lang.moodle.org
    # cliexec.sh /html/local/amos/cli/enfix-export.php
    # cd ~/lang.moodle.org/moodledata/amos/export-enfix/
    # tar czf ~/enfix.tgz *
    # exit
    # cd ~/tmp
    # scp lang.moodle.org:~/enfix.tgz .
    # tar xzf enfix.tgz

2. Go to your moodle.git checkout and make a branch to be submitted for integration.

    # cd /path/to/moodle/git/clone
    # git checkout -b en_fix origin/master

3. Make a temporary directory that will hold symlinks to all language files.

    # mkdir tmp
    # /path/to/amos/site/local/amos/cli/enfix-symlinks.sh $(pwd) tmp
    # ls -al tmp

4. Run the enfix-merge.php.

    # /usr/bin/php /path/to/amos/site/local/amos/cli/enfix-merge.php --symlinksdir=$(pwd)/tmp --enfixdir=/home/mudrd8mz/tmp/enfix-export/2.5 > enfix.log

5. Review the changes and submit them for integration. Pay attention to all
   [WRN] messages in enfix.log - some strings (especially those double-quoted
   etc) are not detected well. Check for syntax errors:

    # cd tmp
    # for f in *.php; do php -l $f; done

   Do not forget to commit it with --author="Helen Foster <helen@moodle.org>"

6. Repeat steps 2-5 for supported STABLE branches as well.
