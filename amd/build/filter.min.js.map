{"version":3,"sources":["../src/filter.js"],"names":["init","registerEventListeners","updateCounterOfSelectedComponents","updateCounterOfSelectedLanguages","showUsedAdvancedOptions","scrollToFirstSelectedComponent","root","document","getElementById","fcmp","componentSearch","flng","languageSearch","fver","flast","addEventListener","e","target","hasAttribute","action","getAttribute","region","closest","handleComponentSelectorAction","toggleMoreOptions","id","startsWith","checked","setAttribute","removeAttribute","forEach","inputField","keyCode","preventDefault","stopPropagation","handleComponentSearch","handleLanguageSearch","selectorByType","type","querySelectorAll","item","needle","value","toString","replace","toLowerCase","row","innerText","indexOf","classList","remove","add","counter","invalidfeedback","count","length","textContent","text","control","forceshow","tagName","selected","option","querySelector","comp","scrollIntoView"],"mappings":"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","sourcesContent":["// This file is part of Moodle - https://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/**\n * JS module for the AMOS translator filter.\n *\n * @module      local_amos/filter\n * @package     local_amos\n * @copyright   2020 David Mudr√°k <david@moodle.com>\n * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {debounce} from 'core/utils';\nimport {get_string as getString} from 'core/str';\n\n/**\n * Initialise the module and register events handlers.\n *\n * @function init\n */\nexport const init = () => {\n    registerEventListeners();\n    updateCounterOfSelectedComponents();\n    updateCounterOfSelectedLanguages();\n    showUsedAdvancedOptions();\n    scrollToFirstSelectedComponent();\n};\n\n/**\n * @function registerEventListeners\n * @param {Element} root\n */\nconst registerEventListeners = () => {\n    let root = document.getElementById('amosfilter');\n    let fcmp = document.getElementById('amosfilter_fcmp');\n    let componentSearch = document.getElementById('amosfilter_fcmp_search');\n    let flng = document.getElementById('amosfilter_flng');\n    let languageSearch = document.getElementById('amosfilter_flng_search');\n    let fver = document.getElementById('amosfilter_fver');\n    let flast = document.getElementById('amosfilter_flast');\n\n    // Click event delegation.\n    root.addEventListener('click', e => {\n        if (!e.target.hasAttribute('data-action')) {\n            return;\n        }\n\n        let action = e.target.getAttribute('data-action');\n        let region = e.target.closest('[data-region]').getAttribute('data-region');\n\n        if (region == 'amosfilter_fcmp') {\n            handleComponentSelectorAction(e, fcmp, action);\n        }\n\n        if (region == 'amosfilter_buttons' && action == 'togglemoreoptions') {\n            toggleMoreOptions(e, root);\n        }\n    });\n\n    // Input change event delegation.\n    root.addEventListener('change', e => {\n        if (e.target.id.startsWith('amosfilter_fcmp_')) {\n            updateCounterOfSelectedComponents();\n        }\n\n        if (e.target.id == 'amosfilter_flng') {\n            updateCounterOfSelectedLanguages();\n        }\n\n        if (e.target.id == 'amosfilter_flast') {\n            if (flast.checked) {\n                fver.setAttribute('disabled', 'disabled');\n            } else {\n                fver.removeAttribute('disabled');\n            }\n        }\n    });\n\n    // Prevent form submission on pressing Enter in the component search and language input.\n    [componentSearch, languageSearch].forEach(inputField => {\n        inputField.addEventListener('keypress', e => {\n            if (e.keyCode == 13) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        });\n    });\n\n    // Handle component search.\n    componentSearch.addEventListener('input', debounce(e => {\n        handleComponentSearch(e, componentSearch, fcmp);\n    }, 200));\n\n    // Handle language search.\n    languageSearch.addEventListener('input', debounce(e => {\n        handleLanguageSearch(e, languageSearch, flng);\n    }, 200));\n};\n\n/**\n * @function handleComponentSelectorAction\n * @param {Event} e\n * @param {Element} fcmp\n * @param {string} action\n */\nconst handleComponentSelectorAction = (e, fcmp, action) => {\n\n    let selectorComponentItem = `:scope [data-region=\"amosfilter_fcmp_item\"]:not(.hidden) input[name=\"fcmp[]\"]`;\n\n    if (action == 'selectstandard') {\n        e.preventDefault();\n        let selectorByType = type => `${selectorComponentItem}[data-component-type=\"${type}\"]`;\n        fcmp.querySelectorAll(`${selectorByType('core')}, ${selectorByType('standard')}`).forEach(item => {\n            item.checked = true;\n        });\n    }\n\n    if (action == 'selectapp') {\n        e.preventDefault();\n        fcmp.querySelectorAll(`${selectorComponentItem}[data-component-app]`).forEach(item => {\n            item.checked = true;\n        });\n    }\n\n    if (action == 'selectall') {\n        e.preventDefault();\n        fcmp.querySelectorAll(`${selectorComponentItem}`).forEach(item => {\n            item.checked = true;\n        });\n    }\n\n    if (action == 'selectnone') {\n        e.preventDefault();\n        fcmp.querySelectorAll(`${selectorComponentItem}`).forEach(item => {\n            item.checked = false;\n        });\n    }\n\n    updateCounterOfSelectedComponents();\n};\n\n/**\n * @function handleComponentSearch\n * @param {Event} e\n * @param {Element} inputField\n * @param {Element} fcmp\n */\nconst handleComponentSearch = (e, inputField, fcmp) => {\n    let needle = inputField.value.toString().replace(/^ +| +$/, '').toLowerCase();\n\n    fcmp.querySelectorAll(':scope label[for^=\"amosfilter_fcmp_f_\"]').forEach(item => {\n        let row = item.closest('[data-region=\"amosfilter_fcmp_item\"]');\n        if (needle == '' || item.innerText.toString().toLowerCase().indexOf(needle) !== -1) {\n            row.classList.remove('hidden');\n        } else {\n            row.classList.add('hidden');\n        }\n    });\n};\n\n/**\n * @function updateCounterOfSelectedComponents\n */\nconst updateCounterOfSelectedComponents = () => {\n    let fcmp = document.getElementById('amosfilter_fcmp');\n    let counter = document.getElementById('amosfilter_fcmp_counter');\n    let invalidfeedback = document.getElementById('amosfilter_fcmp_invalid_feedback');\n    let count = fcmp.querySelectorAll(':scope input[name=\"fcmp[]\"]:checked').length;\n\n    if (count == 0) {\n        counter.classList.add('badge-danger');\n        fcmp.classList.add('is-invalid');\n        invalidfeedback.classList.remove('hidden');\n    } else {\n        counter.classList.remove('badge-danger');\n        fcmp.classList.remove('is-invalid');\n        invalidfeedback.classList.add('hidden');\n    }\n\n    counter.textContent = count;\n};\n\n/**\n * @function handleLanguageSearch\n * @param {Event} e\n * @param {Element} inputField\n * @param {Element} flng\n */\nconst handleLanguageSearch = (e, inputField, flng) => {\n    let needle = inputField.value.toString().replace(/^ +| +$/, '').toLowerCase();\n\n    flng.querySelectorAll(':scope option').forEach(item => {\n        if (needle == '' || item.text.toString().toLowerCase().indexOf(needle) !== -1) {\n            item.classList.remove('hidden');\n            item.removeAttribute('disabled');\n        } else {\n            item.classList.add('hidden');\n            item.setAttribute('disabled', 'disabled');\n        }\n    });\n};\n\n/**\n * @function updateCounterOfSelectedLanguages\n */\nconst updateCounterOfSelectedLanguages = () => {\n    let flng = document.getElementById('amosfilter_flng');\n    let counter = document.getElementById('amosfilter_flng_counter');\n    let invalidfeedback = document.getElementById('amosfilter_flng_invalid_feedback');\n    let count = flng.querySelectorAll(':scope option:checked').length;\n\n    if (count == 0) {\n        counter.classList.add('badge-danger');\n        flng.classList.add('is-invalid');\n        invalidfeedback.classList.remove('hidden');\n    } else {\n        counter.classList.remove('badge-danger');\n        flng.classList.remove('is-invalid');\n        invalidfeedback.classList.add('hidden');\n    }\n\n    counter.textContent = count;\n};\n\n/**\n * @function toggleMoreOptions\n * @param {Event} e\n * @param {Element} root\n */\nconst toggleMoreOptions = async(e, root) => {\n    e.preventDefault();\n\n    if (root.getAttribute('data-level-showadvanced') == '0') {\n        root.setAttribute('data-level-showadvanced', 1);\n        e.target.innerText = await getString('lessfilteringoptions', 'local_amos');\n\n    } else {\n        root.setAttribute('data-level-showadvanced', 0);\n        e.target.innerText = await getString('morefilteringoptions', 'local_amos');\n        showUsedAdvancedOptions();\n    }\n};\n\n/**\n * Make advanced options that have been set, visible even in basic mode.\n *\n * @function showUsedAdvancedOptions\n */\nconst showUsedAdvancedOptions = () => {\n    let root = document.getElementById('amosfilter');\n\n    root.querySelectorAll(':scope [data-level=\"advanced\"][data-level-control]').forEach(item => {\n        let control = document.getElementById(item.getAttribute('data-level-control'));\n        let forceshow = false;\n\n        if (control.tagName.toLowerCase() == 'input'\n                && control.getAttribute('type') == 'checkbox'\n                && control.checked) {\n            forceshow = true;\n        }\n\n        if (control.tagName.toLowerCase() == 'input'\n                && control.getAttribute('type') == 'text'\n                && control.value !== '') {\n            forceshow = true;\n        }\n\n        if (control.tagName.toLowerCase() == 'select'\n                && control.hasAttribute('data-default')\n                && !control.hasAttribute('disabled')) {\n            let selected = control.querySelectorAll(':scope option:checked');\n\n            if (selected.length != 1) {\n                forceshow = true;\n\n            } else {\n                selected.forEach(option => {\n                    if (option.value !== control.getAttribute('data-default')) {\n                        forceshow = true;\n                    }\n                });\n            }\n        }\n\n        if (forceshow) {\n            item.setAttribute('data-level-forceshow', 1);\n        } else {\n            item.removeAttribute('data-level-forceshow');\n        }\n    });\n\n    root.querySelectorAll(':scope [data-level=\"advanced\"][data-level-control]').forEach(item => {\n        let control = document.getElementById(item.getAttribute('data-level-control'));\n\n        if (control.tagName.toLowerCase() == 'fieldset') {\n            if (control.querySelector('[data-level-forceshow]')) {\n                item.setAttribute('data-level-forceshow', 1);\n            } else {\n                item.removeAttribute('data-level-forceshow');\n            }\n        }\n    });\n};\n\n/**\n * @function scrollToFirstSelectedComponent\n */\nconst scrollToFirstSelectedComponent = () => {\n    let comp = document.getElementById('amosfilter_fcmp').querySelector('input[id^=\"amosfilter_fcmp_f_\"]:checked');\n\n    if (comp) {\n        comp.scrollIntoView(false);\n    }\n};\n"],"file":"filter.min.js"}