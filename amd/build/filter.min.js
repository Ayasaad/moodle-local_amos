define ("local_amos/filter",["exports","core/utils"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;var c={ROOT:{ID:"amosfilter",REGION:"amosfilter"},FCMP:{ID:"amosfilter_fcmp",REGION:"amosfilter_fcmp"},FCMPITEM:{REGION:"amosfilter_fcmp_item"},FCMPCOUNTER:{ID:"amosfilter_fcmp_counter"},FCMPSEARCH:{ID:"amosfilter_fcmp_search"}};a.init=function init(){d();h()};var d=function(){var a=document.getElementById(c.ROOT.ID),d=document.getElementById(c.FCMP.ID),i=document.getElementById(c.FCMPSEARCH.ID);a.addEventListener("click",function(a){if(!a.target.hasAttribute("data-action")){return}var b=a.target.getAttribute("data-action"),e=a.target.closest("[data-region]").getAttribute("data-region");if(e==c.FCMP.REGION){f(a,d,b)}});a.addEventListener("change",function(a){if(a.target.getAttribute("id").startsWith("amosfilter_fcmp_")){h()}});i.addEventListener("keypress",function(a){if(13==a.keyCode){a.preventDefault();a.stopPropagation()}});i.addEventListener("input",(0,b.debounce)(function(a){g(a,i,d)},200))},f=function(a,b,d){var e=":scope [data-region=\"".concat(c.FCMPITEM.REGION,"\"]:not(.hidden) input[name=\"fcmp[]\"]");if("selectstandard"==d){a.preventDefault();var f=function(a){return"".concat(e,"[data-component-type=\"").concat(a,"\"]")};b.querySelectorAll("".concat(f("core"),", ").concat(f("standard"))).forEach(function(a){a.checked=!0})}if("selectapp"==d){a.preventDefault();b.querySelectorAll("".concat(e,"[data-component-app]")).forEach(function(a){a.checked=!0})}if("selectall"==d){a.preventDefault();b.querySelectorAll("".concat(e)).forEach(function(a){a.checked=!0})}if("selectnone"==d){a.preventDefault();b.querySelectorAll("".concat(e)).forEach(function(a){a.checked=!1})}h()},g=function(a,b,c){var d=b.value.toString().replace(/^ +| +$/,"");c.querySelectorAll(":scope label[for^=\"amosfilter_fcmp_f_\"]").forEach(function(a){var b=a.closest("[data-region=\"amosfilter_fcmp_item\"]");if(""==d||-1!==a.innerText.toString().indexOf(d)){b.classList.remove("hidden")}else{b.classList.add("hidden")}})},h=function(){var a=document.getElementById(c.FCMP.ID),b=document.getElementById(c.FCMPCOUNTER.ID),d=a.querySelectorAll(":scope input[name=\"fcmp[]\"]:checked").length;if(0==d){b.classList.add("badge-danger")}else{b.classList.remove("badge-danger")}b.textContent=d}});
//# sourceMappingURL=filter.min.js.map
