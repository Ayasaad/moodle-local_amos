define ("local_amos/filter",["exports","core/utils"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;var c={ROOT:{ID:"amosfilter",REGION:"amosfilter"},FCMP:{ID:"amosfilter_fcmp",REGION:"amosfilter_fcmp"},FCMPITEM:{REGION:"amosfilter_fcmp_item"},FCMPCOUNTER:{ID:"amosfilter_fcmp_counter"},FCMPSEARCH:{ID:"amosfilter_fcmp_search"},FLNG:{ID:"amosfilter_flng",REGION:"amosfilter_flng"},FLNGCOUNTER:{ID:"amosfilter_flng_counter"},FLNGSEARCH:{ID:"amosfilter_flng_search"},FVER:{ID:"amosfilter_fver"},FLAST:{ID:"amosfilter_flast"}};a.init=function init(){d();h();j()};var d=function(){var a=document.getElementById(c.ROOT.ID),d=document.getElementById(c.FCMP.ID),k=document.getElementById(c.FCMPSEARCH.ID),l=document.getElementById(c.FLNG.ID),m=document.getElementById(c.FLNGSEARCH.ID),n=document.getElementById(c.FVER.ID),o=document.getElementById(c.FLAST.ID);a.addEventListener("click",function(a){if(!a.target.hasAttribute("data-action")){return}var b=a.target.getAttribute("data-action"),e=a.target.closest("[data-region]").getAttribute("data-region");if(e==c.FCMP.REGION){f(a,d,b)}});a.addEventListener("change",function(a){if(a.target.getAttribute("id").startsWith("amosfilter_fcmp_")){h()}if(a.target.getAttribute("id")==c.FLNG.ID){j()}if(a.target.getAttribute("id")==c.FLAST.ID){if(o.checked){n.classList.add("hidden")}else{n.classList.remove("hidden")}}});[k,m].forEach(function(a){a.addEventListener("keypress",function(a){if(13==a.keyCode){a.preventDefault();a.stopPropagation()}})});k.addEventListener("input",(0,b.debounce)(function(a){g(a,k,d)},200));m.addEventListener("input",(0,b.debounce)(function(a){i(a,m,l)},200))},f=function(a,b,d){var e=":scope [data-region=\"".concat(c.FCMPITEM.REGION,"\"]:not(.hidden) input[name=\"fcmp[]\"]");if("selectstandard"==d){a.preventDefault();var f=function(a){return"".concat(e,"[data-component-type=\"").concat(a,"\"]")};b.querySelectorAll("".concat(f("core"),", ").concat(f("standard"))).forEach(function(a){a.checked=!0})}if("selectapp"==d){a.preventDefault();b.querySelectorAll("".concat(e,"[data-component-app]")).forEach(function(a){a.checked=!0})}if("selectall"==d){a.preventDefault();b.querySelectorAll("".concat(e)).forEach(function(a){a.checked=!0})}if("selectnone"==d){a.preventDefault();b.querySelectorAll("".concat(e)).forEach(function(a){a.checked=!1})}h()},g=function(a,b,c){var d=b.value.toString().replace(/^ +| +$/,"").toLowerCase();c.querySelectorAll(":scope label[for^=\"amosfilter_fcmp_f_\"]").forEach(function(a){var b=a.closest("[data-region=\"amosfilter_fcmp_item\"]");if(""==d||-1!==a.innerText.toString().toLowerCase().indexOf(d)){b.classList.remove("hidden")}else{b.classList.add("hidden")}})},h=function(){var a=document.getElementById(c.FCMP.ID),b=document.getElementById(c.FCMPCOUNTER.ID),d=a.querySelectorAll(":scope input[name=\"fcmp[]\"]:checked").length;if(0==d){b.classList.add("badge-danger")}else{b.classList.remove("badge-danger")}b.textContent=d},i=function(a,b,c){var d=b.value.toString().replace(/^ +| +$/,"").toLowerCase();c.querySelectorAll(":scope option").forEach(function(a){if(""==d||-1!==a.text.toString().toLowerCase().indexOf(d)){a.classList.remove("hidden");a.removeAttribute("disabled")}else{a.classList.add("hidden");a.setAttribute("disabled","disabled")}})},j=function(){var a=document.getElementById(c.FLNG.ID),b=document.getElementById(c.FLNGCOUNTER.ID),d=a.querySelectorAll(":scope option:checked").length;if(0==d){b.classList.add("badge-danger")}else{b.classList.remove("badge-danger")}b.textContent=d}});
//# sourceMappingURL=filter.min.js.map
